---
id: 6-spring-db
title: 6. 스프링 DB 접근 기술
---

> 이때까진 메모리에 그냥 저장함, DB로 하는 방법 고고

## H2 데이터베이스 설치

- 교육용으로 좋음, 인메모리용
- [설치 링크](https://www.h2database.com/html/main.html)
  - All Platforms 로 설치
- terminal로 압축해제된 곳에 `./bin` 경로로 들어감
- 아래를 실행시 h2 브라우저 도구가 열림

```sh
chmod 755 h2.sh  # 최초 mac에서 실행권한 부여
./h2.sh
```

- 임의의 ip로 브라우저 도구가 열리게 되는데 ip 부분을 제거하고 `localhost` 로 domain 부분을 변경
- 최초로 db 파일을 만들 땐 `jdbc:h2:~/test` 설정 유지 후 연결
- `~/test.mv.db` 파일 생성됨을 확인
- 이후론 `jdbc:h2:tcp://localhost/~/test` 로 연결
  - 소켓 커넥션이 동시성 제어에 적합
- 접속 후 브라우저 클라이언트에서 `member` table 생성

```sql
drop table if exists member CASCADE;
create table member
(
    id bigint generated by default as identity, # 자동으로 값을 채워줌 
    name varchar(255),
    primary key (id)
);
```

- row 하나 insert

```sql
insert into member(name) values('spring');
```
 
### intelliJ 에서 h2 연결하기

- h2.sh 로 먼저 실행시켜 놔야함
- intelliJ에 DB 기능이 있다면 연결해서 사용 가능
  - database 연결 설정시 h2로 시작
  - 위에서 생성했을 때 지정해놓은 계정을 기억해둠 (default: id/sa, pw/없음)
  - URL 값으로 `jdbc:h2:tcp://localhost/~/test` 를 입력

## 순수 JDBC

## 스프링 통합 테스트

## 스프링 jdbcTemplate

## JPA

## 스피링 데이터 JPA

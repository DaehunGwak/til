<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/til/blog/rss.xml" title="Ordi's Today I Learned Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/til/blog/atom.xml" title="Ordi's Today I Learned Blog Atom Feed"><title data-react-helmet="true">02. 객체 생성과 파괴 | Ordi&#x27;s Today I Learned</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="02. 객체 생성과 파괴 | Ordi&#x27;s Today I Learned"><meta data-react-helmet="true" name="description" content="주요 포인트"><meta data-react-helmet="true" property="og:description" content="주요 포인트"><meta data-react-helmet="true" property="og:url" content="https://daehungwak.github.io/til/docs/java/effective-java/02-destroy-create-object"><link data-react-helmet="true" rel="shortcut icon" href="/til/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://daehungwak.github.io/til/docs/java/effective-java/02-destroy-create-object"><link rel="stylesheet" href="/til/styles.da54caf6.css">
<link rel="preload" href="/til/styles.7b5922ae.js" as="script">
<link rel="preload" href="/til/runtime~main.0371fc92.js" as="script">
<link rel="preload" href="/til/main.7866f37e.js" as="script">
<link rel="preload" href="/til/1.628400af.js" as="script">
<link rel="preload" href="/til/71.29b6396e.js" as="script">
<link rel="preload" href="/til/72.818542ac.js" as="script">
<link rel="preload" href="/til/935f2afb.475effe2.js" as="script">
<link rel="preload" href="/til/70.5d362b1d.js" as="script">
<link rel="preload" href="/til/14db54ec.594d87e9.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/til/"><strong class="navbar__title">Ordi TIL 📚</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/til/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://daehungwak.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/DaehunGwak/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/til/"><strong class="navbar__title">Ordi TIL 📚</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/til/docs/">Docs</a></li><li class="menu__list-item"><a href="https://daehungwak.github.io/" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/DaehunGwak/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/til/docs/">메인</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">html</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/html/intro">HTML 살펴보기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/html/elements">HTML 요소 - 들어가기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/html/document-metadata">HTML 요소 - Document metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/html/sections">HTML 요소 - Sections</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/html/grouping">HTML 요소 - Grouping content</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">javascript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/javascript/events">이벤트 버블링, 캡처링, 위임</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/javascript/debounce-throttle">Debounce와 Throttle</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">htmlcss-bugless-101</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/htmlcss/01-intro">시작하기에 앞서</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/htmlcss/02-tags-basic">HTML 기초 - tags</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">dom</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/dom/document-fragment">DocumentFragment 노드</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">concept</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/web/concept/ssr">SSR, CSR, SSG</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Spring</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">자바 ORM 표준 JPA 프로그래밍</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/jpa/00">00. 소개</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/jpa/01">01. JPA 소개</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/jpa/02">02. JPA 시작하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/jpa/03">03. 영속성 관리</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/jpa/04">04. 엔티티 매핑</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">실전! 스프링 부트 JPA 활용 1</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/practical-boot-jpa-1/00-intro">00. 소개</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/practical-boot-jpa-1/01-setting">01. 프로젝트 세팅</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">김영한님의 스프링 입문 - 노트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/0-intro">0. 강의 소개</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/1-project-settings">1. 프로젝트 환경설정</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/2-web-dev-basic">2. 스프링 웹 개발 기초</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/3-dev-backend">3. 회원 관리예제 - 백엔드 개발</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/4-bean-dependency">4. 스프링 빈과 의존관계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/5-web-mvc">5. 회원 관리 예제 - 웹 MVC 개발</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/6-spring-db">6. 스프링 DB 접근 기술</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/7-aop">7. AOP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/8-wrap-up">8. 정리 및 다음 순서</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/9-review">9. 리뷰</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/spring/beginner/999-intellij-shortcut">999. intelliJ Short Cut</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">이펙티브 자바</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/java/effective-java/01-intro">01. 들어가기</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/til/docs/java/effective-java/02-destroy-create-object">02. 객체 생성과 파괴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/java/effective-java/03-common-method">03. 모든 객체의 공통 메서드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/java/effective-java/04-class-interface">04. 클래스와 인터페이스</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/java/effective-java/05-generic">05. 제네릭</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">클린코드</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/01">01. 깨끗한 코드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/02">02. 의미있는 이름</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/03">03. 함수</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/04">04. 주석</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/07">07. 에러 처리</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/08">08. 경계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/09">09. 단위 테스트</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/10">10. 클래스</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/12">12. 창발성</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/16">16. SerialDate 리팩터링</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/cleancode/17">17. 냄새와 휴리스틱</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">자바의 정석</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/essence-of-java/01-05">ch01 ~ 05 빠르게 훑기</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">백기선님의 기본 live-study</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/live-study/01-jvm">mac에 jenv으로 여러 jdk 설치</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">유틸 정리</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/java/util/weak-hash-map">WeakHashMap 알아보기</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/java/mac-jenv">mac에 jenv으로 여러 jdk 설치</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/java/mac-tomcat">mac에 tomcat 설치</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">OOP</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/oop/solid">객체지향 SOLID 원칙</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">MySQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/mysql/docker-mysql">docker로 mysql local 세팅</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Vue</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Vue Mastery</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/vue/vue-mastery/vue3-ts">Vue 3 + Typescript</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Webpack</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/webpack/webpack-beginner">npm + webpack 빠르게 시작</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">git</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/git/config-account">git 해당 프로젝트에만 계정 설정</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">책</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/books/clean-coder">클린코더</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/books/python-algo-interview">파이썬 알고리즘 인터뷰</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/books/practices-of-the-python-pro">프로그래머를 위한 파이썬</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/docusaurus/til">docusaurus를 til로 쓰기</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">02. 객체 생성과 파괴</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="주요-포인트"></a>주요 포인트<a class="hash-link" href="#주요-포인트" title="Direct link to heading">#</a></h2><ul><li>올바른 객체 생성 시기와 생성 법</li><li>불필요한 객체 생성을 피하는 법</li><li>제때 파괴됨을 보장하는 법</li><li>파괴 전 정리 작업 관리하는 법</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-01-생성자-대신-정적-팩터리-메서드를-고려하라"></a>Item 01. 생성자 대신 정적 팩터리 메서드를 고려하라<a class="hash-link" href="#item-01-생성자-대신-정적-팩터리-메서드를-고려하라" title="Direct link to heading">#</a></h2><blockquote><p>Factory Method 패턴과는 다른 이야기임</p></blockquote><ul><li>클래스 생성자와는 별도로, 정적 팩터리 메소드 (Static Factory Method)로 객체 생성을 관리할 수 있음</li><li>정적 팩터리 메소드로 제공하는 것은 장단점이 존재하므로 무조건 사용하라는 것은 아님</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="일반-생성자보다-정적-팩터리-메소드가-좋은-이유"></a>일반 생성자보다 정적 팩터리 메소드가 좋은 이유<a class="hash-link" href="#일반-생성자보다-정적-팩터리-메소드가-좋은-이유" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-이름을-가질-수-있음"></a>1) 이름을 가질 수 있음<a class="hash-link" href="#1-이름을-가질-수-있음" title="Direct link to heading">#</a></h4><ul><li>정적 팩터리 메소드를 잘지어 생성되는 의미를 더욱 상세하게 묘사할 수 있음</li><li><code>BigInteger(int, int, Random)</code> vs <code>BigInteger.probablePrime()</code><ul><li>후자가 설명력이 더 강함</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-호출될때-마다-인스턴스를-새로-생성하지-않아도-됨"></a>2) 호출될때 마다 인스턴스를 새로 생성하지 않아도 됨<a class="hash-link" href="#2-호출될때-마다-인스턴스를-새로-생성하지-않아도-됨" title="Direct link to heading">#</a></h4><ul><li>불변 클래스는 인턴스를 미리 만드는 캐싱 전략으로 재활용 가능</li><li><code>Boolean(boolean)</code> vs <code>Boolean.valueOf(boolean)</code><ul><li>후자는 구현이 미리 만들어 놓은 객체를 리턴</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-반환-타입의-하위-타입-객체를-반환할-수-있는-능력을-가짐"></a>3) 반환 타입의 하위 타입 객체를 반환할 수 있는 능력을 가짐<a class="hash-link" href="#3-반환-타입의-하위-타입-객체를-반환할-수-있는-능력을-가짐" title="Direct link to heading">#</a></h4><blockquote><p>논의하면 좋을 내용 일 듯, 아래는 나만의 해석</p></blockquote><ul><li>코드의 유연성을 제공함</li><li>하위의 클래스가 어떤건지 상관없이 상위 타입의 인터페이스로 개발이 가능함<ul><li>하위 타입을 신경쓰지 않아도 되서, 개발자가 해당 API를 통해 알아야할 내용을 줄일 수 있음</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-입력-매개변수에-따라-다른-클래스의-객체를-반환할-수-있음"></a>4) 입력 매개변수에 따라 다른 클래스의 객체를 반환할 수 있음<a class="hash-link" href="#4-입력-매개변수에-따라-다른-클래스의-객체를-반환할-수-있음" title="Direct link to heading">#</a></h4><ul><li>예시: <code>EnumSet</code> 클래스는 정적 팩터리만 제공<ul><li>원소 수에따라 <code>RegularEnumSet</code> 혹은 <code>JumboEnumSet</code> 중 하나를 반환</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-정적-팩터리-메서드를-작성하는-시점에-반환할-객체의-클래스가-존재하지-않아도-됨"></a>5) 정적 팩터리 메서드를 작성하는 시점에 반환할 객체의 클래스가 존재하지 않아도 됨<a class="hash-link" href="#5-정적-팩터리-메서드를-작성하는-시점에-반환할-객체의-클래스가-존재하지-않아도-됨" title="Direct link to heading">#</a></h4><blockquote><p>이게 왜 장점?</p></blockquote><ul><li>예시: JDBC<ul><li>JDBC 코드 구성<ul><li>Service Interface: 구현체 동작 정의</li><li>Provider Registration API: 구현체 등록용</li><li>Service Access API: 클라이언트 전용</li></ul></li><li>클라이언트가 Service Acess API 를 통해 Provider 조건 명시가능</li><li>Service Access API가 정적 팩터리 메서드를 이용하여 Provider를 유연하게 심어줄 수 있음</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="정적-팩터리-메소드의-단점"></a>정적 팩터리 메소드의 단점<a class="hash-link" href="#정적-팩터리-메소드의-단점" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-정적-팩터리-메소드만-구성된-클래스는-하위-클래스를-만들-수-없음"></a>1) 정적 팩터리 메소드만 구성된 클래스는 하위 클래스를 만들 수 없음<a class="hash-link" href="#1-정적-팩터리-메소드만-구성된-클래스는-하위-클래스를-만들-수-없음" title="Direct link to heading">#</a></h4><ul><li>상속을 하려면 public, protected 생성자가 필요함</li><li>상속보다 컴포지션을 이용하는 전략으로는 장점으로 전락할 수도 있음</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-정적-팩터리-메서드는-프로그래머가-찾기-어려움"></a>2) 정적 팩터리 메서드는 프로그래머가 찾기 어려움<a class="hash-link" href="#2-정적-팩터리-메서드는-프로그래머가-찾기-어려움" title="Direct link to heading">#</a></h4><ul><li>API 문서를 잘 써놓고 메서드의 이름도 널리 알려진 규약을 따를 수 밖에 없음</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="정적-팩터리-메소드에-쓰이는-잘알려진-컨벤션"></a>정적 팩터리 메소드에 쓰이는 잘알려진 컨벤션<a class="hash-link" href="#정적-팩터리-메소드에-쓰이는-잘알려진-컨벤션" title="Direct link to heading">#</a></h3><ul><li><code>from</code>: 매개 변수 하나를 받아 해당 타입의 인스턴스 반환</li><li><code>of</code>: 매개 변수 여러개를 받아 적합한 타입의 인스턴스 반환</li><li><code>valueOf</code>: from과 of의 더 자세한 버전</li><li><code>instance</code> or <code>getInstance</code>: 같은 인스턴스임을 보장하진 않음</li><li><code>create</code> or <code>newInstance</code>: 매번 새로운 인스턴스임을 보장</li><li><code>getType</code>: 구현된 클래스 본인이 아닌, 다른 클래스의 인스턴스를 반환</li><li><code>newType</code>: newInstance + getType 특징을 가짐</li><li><code>type</code>: getType, newType 의 간결 버전</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="핵심-정리"></a>핵심 정리<a class="hash-link" href="#핵심-정리" title="Direct link to heading">#</a></h3><ul><li>반드시 쓰라는게 아니고 장단점을 파악해 쓰자</li><li>무작정 public 생성자 보단 정적 팩터리 메서드를 고려하는 습관을 가져보자</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-02-생성자에-매개변수가-많다면-빌더를-고려하라"></a>Item 02. 생성자에 매개변수가 많다면 빌더를 고려하라<a class="hash-link" href="#item-02-생성자에-매개변수가-많다면-빌더를-고려하라" title="Direct link to heading">#</a></h2><ul><li>매개변수가 많으면 정적 팩터리와 생성자가 관리하기 힘듦</li><li>대안1) 점층적 생성자 패턴 (Telescoping Constructor Pattern)<ul><li>필수 매개변수, 필수 매개변수 + 선택 매개변수 하나, ... 이런식으로 모든 경우의수 생성자를 만듦</li><li>점층적 생성자 패턴을 쓸 수 도 있지만, 그럼 생성자가 너무 많아짐<ul><li>가독성 저하</li></ul></li></ul></li><li>대안2) JavaBeans Pattern<ul><li>매개 변수가 없는 생성자로 객체를 만들고, 이후 setter로 매개변수 설정</li><li>객체를 불변으로 만들 수 없음</li><li>객체가 세팅될 때까지의 일관성(consistency)가 무너진 상태임<ul><li>freeze 하는 방법도 있지만 다루기가 어려워 실전에선 잘 안쓰임</li></ul></li></ul></li><li>고로 매개변수가 많으면 Builder Pattern 을 사용하자</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="빌더-패턴-특징"></a>빌더 패턴 특징<a class="hash-link" href="#빌더-패턴-특징" title="Direct link to heading">#</a></h3><ul><li>필수 매개 변수를 지정할 수 있음 (생성자 패턴의 장점)</li><li>선택적 매개 변수를 생성단계에서 지정할 수 있어 일관성(consistency)가 보장 (자바빈즈 패턴 단점 보완)</li><li>사용자 입장에서 가독성이 점층적 생서자 패턴보다 좋아짐</li><li>파이썬과 스칼라에 있는 명명된 선택적 매개변수 (named optional parameters)를 흉내낸 것</li><li>계층적으로 설계된 클래스와 잘 어울림</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="빌더-패턴-단점"></a>빌더 패턴 단점<a class="hash-link" href="#빌더-패턴-단점" title="Direct link to heading">#</a></h3><ul><li>빌더부터 만들어야하는 코스트가 발생</li><li>매개변수가 작으면 그냥 점층적 생성자가 나음</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="실습-코드"></a>실습 코드<a class="hash-link" href="#실습-코드" title="Direct link to heading">#</a></h3><ul><li><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item02" target="_blank" rel="noopener noreferrer">item 2 코드</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="핵심-정리-2"></a>핵심 정리 2<a class="hash-link" href="#핵심-정리-2" title="Direct link to heading">#</a></h3><ul><li>매개 변수가 많다면 빌더 패턴으로!</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-03-private-생성자나-열거-타입으로-싱글턴임을-보증하라"></a>Item 03. private 생성자나 열거 타입으로 싱글턴임을 보증하라<a class="hash-link" href="#item-03-private-생성자나-열거-타입으로-싱글턴임을-보증하라" title="Direct link to heading">#</a></h2><blockquote><p>이해못함</p><ul><li>싱글턴이 왜 mock으로 대체하기 어려운 걸까?</li><li>정적 팩터리를 제네릭 싱글턴 팩터리로 만들 수 있음 (item 30, 이것도 이해 못함)</li><li>정적 팩터리의 메서드 참조를 supplier로 사용할 수 있음 (item 43, 44, 이해 못함 2)</li></ul></blockquote><ul><li>싱글턴 패턴<ul><li>인스턴스를 오직 하나만 생성할 수 있는 클래스</li><li>상태가 없는 객체나 시스템 설계상 하나의 객체만 존재해야하는 경우 사용</li></ul></li><li>하지만 싱글턴은 이를 사용하는 클래스가 테스트에 애를 먹을 수 있음</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="싱글턴-만드는-방식"></a>싱글턴 만드는 방식<a class="hash-link" href="#싱글턴-만드는-방식" title="Direct link to heading">#</a></h3><ul><li>공통적으로 private으로 생성자를 감춤</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-public-static-멤버가-final-필드인-방식"></a>1) public static 멤버가 final 필드인 방식<a class="hash-link" href="#1-public-static-멤버가-final-필드인-방식" title="Direct link to heading">#</a></h4><p><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item03/field" target="_blank" rel="noopener noreferrer">item 3. public static final field, Elvis 예제</a></p><ul><li>이렇게되면 private 생성자라 public static final인 Elvis 객체 INSTANCE 가 하나임이 보장됨</li><li>리플렉션(item 65) 으로 우회가능<ul><li><code>AccessibleObject.setAccessible</code> 을 사용해 private 메소드를 접근할 수 있어 우회적으로 새 객체 생성 가능</li><li>이땐, 생성자를 수정하여 두번 째 객체에선 생성이 안되도록 예를 던지게 해야함</li></ul></li><li>장점<ul><li>간결</li><li>싱글턴임을 API로 바로 알 수 있음</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-정적-팩터리-메서드를-public-static-멤버로-제공"></a>2) 정적 팩터리 메서드를 public static 멤버로 제공<a class="hash-link" href="#2-정적-팩터리-메서드를-public-static-멤버로-제공" title="Direct link to heading">#</a></h4><p><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item03/staticfactory" target="_blank" rel="noopener noreferrer">item 3. static factory method, Elvis 예제</a></p><ul><li>마찬가지로 리플렉션으로 우회 가능, 생성 시 예외로 방어해야 함</li><li>장점<ul><li>변경에 용이<ul><li>싱글턴으로 사용하고 있지만, getInstance 부분만 수정하면 싱글턴 아닌 다른 무언가로 바꾸기 용이</li></ul></li><li>정적 팩터리를 제네릭 싱글턴 팩터리로 만들 수 있음 (item 30, 이것도 이해 못함)</li><li>정적 팩터리의 메서드 참조를 supplier로 사용할 수 있음 (item 43, 44, 이해 못함 2)</li></ul></li><li>해당 장점 필요없으면 public static final 방식 권장</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="위의-방식의-직렬화"></a>위의 방식의 직렬화<a class="hash-link" href="#위의-방식의-직렬화" title="Direct link to heading">#</a></h3><ul><li><code>Serializable</code> 를 구현한다고 위 방식의 싱글턴 클래스를 직렬화 할 수 없음</li><li>모든 필드를 transient라 선언 후 readResolve 메서드를 제공해야함 (item 89)<ul><li>이렇게 안하면 역직렬화 시, 새 객체가 만들어짐</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="enum으로-싱글턴-만들기"></a>enum으로 싱글턴 만들기<a class="hash-link" href="#enum으로-싱글턴-만들기" title="Direct link to heading">#</a></h3><p><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item03/enumset" target="_blank" rel="noopener noreferrer">item 3. enum, Elvis 예제</a></p><ul><li>가장 권장되는 방식</li><li>장점<ul><li>간결</li><li>추가 노력없이 직렬화 가능</li><li>리플렉션 공격 방어</li></ul></li><li>단점<ul><li>상속 불가</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-04-인스턴스화를-막으려거든-private-생성자를-사용하라"></a>Item 04. 인스턴스화를 막으려거든 private 생성자를 사용하라<a class="hash-link" href="#item-04-인스턴스화를-막으려거든-private-생성자를-사용하라" title="Direct link to heading">#</a></h2><ul><li>가끔 단순 정적 메서드와 정적 필드만을 만들고 싶을때가 있음</li><li>기본 라이브러리인 Math, Arrays, Collections는 이를 활용함</li><li>애초에 인스턴스화 안되는 추상 클래스를 사용하면 되지 않겠냐 생각할 수 있겠지만...<ul><li>추상 클래스 보면 구현하고 싶어져서 상속받아 구현하면 게임오버</li></ul></li><li><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item04" target="_blank" rel="noopener noreferrer">item 4. UtilityClass 예제</a><ul><li>이렇게 private으로 선언하고 밖에서 호출 불가</li><li>그리고 생성자 내부에서 Assertion을 던지면 상속해서 인스턴스화 하는 꼼수(?) 도 방지 가능<ul><li>명시적이든, 묵시적이든 어떻게든 상위 클래스의 생성자를 부르게 되어 있음</li></ul></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-05-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라"></a>Item 05. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라<a class="hash-link" href="#item-05-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라" title="Direct link to heading">#</a></h2><ul><li>맞춤법 검사기 - 사전의 예로 설명하고 있음<ul><li>맞춤법 검사기는 사전을 의존함</li><li>하지만 싱글턴(item 3)이나 정적 유틸리티 클래스(item 4)로 사전을 맞춤법 검사기에 사용하기엔 사전이 여러개인 경우 부적합함</li></ul></li><li>어떤 클래스에서 의존하는 다른 클래스가 여러 타입일 경우, 생성자로 넘겨줘서 의존하는 방식</li></ul><p>맞춤법 검사기를 의존 객체주입으로 사용한 예</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">SpellChecker</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Lexicon</span><span class="token plain"> dictionary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">SpellChecker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Lexicon</span><span class="token plain"> dictionary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dictionary </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">requireNonNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dictionary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">isValid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> world</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">List</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">String</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">suggestions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> typo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>이의 변형으로, <code>Factory Method Pattern</code>이 있음<ul><li>팩터리를 생성자로 넘겨줘서 의존하는 방식</li><li>팩터리는 호출마다 새로운 인스턴스를 만드는 객체</li><li>예제로 Java 8의 <code>Supplier&lt;T&gt;</code> 인터페이스 가 있음</li></ul></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Mosaic 객체 생성을 위해 `Supplier&lt;T&gt;` 를 활용한 tileFactory 주입 예시</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">Mosaic</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Supplier</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics operator" style="color:rgb(137, 221, 255)">?</span><span class="token generics"> </span><span class="token generics keyword" style="font-style:italic">extends</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Tile</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> tileFactory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>의존 객체 주입의 장점<ul><li>테스트 용이성</li><li>유연성</li></ul></li><li>단점<ul><li>의존성이 많다면 코드가 어지러워짐</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="핵심정리"></a>핵심정리<a class="hash-link" href="#핵심정리" title="Direct link to heading">#</a></h3><p>클래스가 내부적으로 하나 이상 존재하며, 해당 클래스가 다른 동작에 영향을 준다면 의존 객체 주입을 사용하자.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-06-불필요한-객체-생성을-피하라"></a>Item 06. 불필요한 객체 생성을 피하라<a class="hash-link" href="#item-06-불필요한-객체-생성을-피하라" title="Direct link to heading">#</a></h2><blockquote><ul><li>어댑터 패턴 추가 공부가 필요</li></ul></blockquote><ul><li><code>성능적으로</code> 같은 기능의 객체를 여러번 생성하는 것 보단, 하나를 만들어 재사용하는 편이 좋음</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 절대 피하기, 실행 될때마다 객체 생성</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bikini&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 권장 방식, &quot;bikini&quot; 리터럴을 사용하는 코드는 같은 객체를 재사용함을 JVM 레벨에서 보장</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bikini&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li><code>Boolean(String)</code> 대신 <code>Boolean.valueOf(String)</code> 팩터리 메서드 사용</li><li>생성 비용이 비싼 객체도 캐싱해서 사용<ul><li><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item06/RomanNumerals.java" target="_blank" rel="noopener noreferrer">item 6. Pattern 리터럴 캐싱 실행 시간 비교 예제</a></li></ul></li><li>객체가 불변이라면 재사용해도 안정적<ul><li>어댑터(뷰) 패턴을 사용할 경우.... 이해가안감</li></ul></li><li>기본타입 사용을 권하고, 의도치 않은 오토 박싱은 피하자<ul><li>오토 박싱이란 primitive type을 자동적으로 Wrapper class 로 변환해주는 기술</li><li><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item06/AutoBoxing.java" target="_blank" rel="noopener noreferrer">item 6. 오토박싱 실행 시간 비교 예제</a></li></ul></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// auto boxing example</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">List</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> list </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ArrayList</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// list.add(new Integer(10)); 과 같음</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>프로그램의 명확성, 간결성, 기능을 위해 객체를 생성하는 것은 좋음!</li><li>item 50. 방어적 복사와는 대조적인 내용임<ul><li><code>방어적 복사가 필요한 상황에서 객체를 재사용 했을때의 피해가 더큼</code></li><li>해당장은 필요없는 객체를 반복 생성했을 때를 주로 다루고 있음</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-07-다-쓴-객체-참조를-해제하라"></a>Item 07. 다 쓴 객체 참조를 해제하라<a class="hash-link" href="#item-07-다-쓴-객체-참조를-해제하라" title="Direct link to heading">#</a></h2><ul><li>가비지 컬렉션 (GC) 을 갖춘 Java라도 메모리 관리는 유념해야함</li><li><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item07/Stack.java" target="_blank" rel="noopener noreferrer">item 7. 메모리 누수 예제</a><ul><li>메모리 누수는 GC 활동과 메모리 사용량이 늘어나 성능저하를 불러 일으킴<ul><li>심할땐 디스크 페이징이나 OutOfMemoryError (OOM) 를 일으켜 앱이 종료됨</li></ul></li><li>예제에서 문제가 있는 <code>pop()</code> 에서 메모리 누수가 발생함<ul><li>elements의 참조를 따로 해제 하지 않아 pop이 되었지만 해당 Object는 GC의 대상이 되지 않음</li><li>개선된 pop에서는 null처리를 하여 해결</li></ul></li></ul></li><li>강박적으로 다쓴 객체를 null처리할 필요는 없고, 위 처럼 예외적인 경우에만 null처리 하면됨</li><li>itme 57에 변수 범위를 최소화하는 테크닉으로 스코프 밖으로 변수를 밀어내면 GC의 대상이 자동으로 됨</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="메모리-누수-주의-케이스"></a>메모리 누수 주의 케이스<a class="hash-link" href="#메모리-누수-주의-케이스" title="Direct link to heading">#</a></h3><ul><li>메모리를 직접 관리하는 경우<ul><li>null 처리</li></ul></li><li>캐시<ul><li>WeakHashMap 을 사용 (이러한 상황에서만 유용)<ul><li>key에 해당하는 value 객체가 존재하지 않게 될 경우, 자동으로 key에서 제거 GC 대상이 됨</li><li><a href="https://github.com/DaehunGwak/study-java/tree/main/effective-java/src/ch02/item07/WeakHashMapTest.java" target="_blank" rel="noopener noreferrer">WeakHashMap 예제</a></li></ul></li></ul></li><li>listener or callback<ul><li>사용자가 콜백을 등록만하고 해제하지 않음...</li><li>콜백을 weak reference로 등록!</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="핵심정리-7"></a>핵심정리 7<a class="hash-link" href="#핵심정리-7" title="Direct link to heading">#</a></h3><ul><li>메모리 누수는 잘 드러나지 않음..</li><li>철저한 코드리뷰 혹은 힙 프로파일러 같은 디버깅 도구로 예방가능</li><li>메모리 누수 관리에 대해 예방법을 익혀두는 것이 매우 중요</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-08-finalizer-와-cleaner-사용을-피하라"></a>Item 08. finalizer 와 cleaner 사용을 피하라<a class="hash-link" href="#item-08-finalizer-와-cleaner-사용을-피하라" title="Direct link to heading">#</a></h2><ul><li>자바에서 제공하는 객체 소멸자, finalizer 와 cleaner</li><li>finalizer 는 예측할 수 없고 상황에 따라 위험할 수 있어 일반적으로 불필요<ul><li>기본적으로 쓰지말기</li></ul></li><li>cleaner 도 finalizer 대안으로 java 9 에 나왔지만 예측할 수 없고, 느리고, 불필요</li><li>c++ 의 destructor(파괴자) 와는 다른 개념으로<ul><li>자원 해제를 활용하려면 try-with-resources 로 해결하자 (Item 09)</li></ul></li><li>finalizer, cleaner 둘다 언제 제때 실행해야하는지 보장할 수 없음</li><li>AutoCloseable 를 구현 + try-with-resources 활용으로 자원 해제를 보장해줄 수 있음</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="그럼-finalizer와-cleaner는-왜-만들었는가"></a>그럼 finalizer와 cleaner는 왜 만들었는가<a class="hash-link" href="#그럼-finalizer와-cleaner는-왜-만들었는가" title="Direct link to heading">#</a></h3><ul><li>자원회수를 finalizer와 cleaner에서 구현하면 안하는 것보단 나음</li><li>네이티브 피어와 연결된 객체</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="예제"></a>예제<a class="hash-link" href="#예제" title="Direct link to heading">#</a></h3><ul><li><a href="https://github.com/DaehunGwak/study-java/blob/main/effective-java/src/ch02/item08" target="_blank" rel="noopener noreferrer">Item 08. Room 예제</a><ul><li>Adult 클래스에서 AutoCloseable 구현 + try-with-resources 조합을 볼 수 있음</li><li>Teenager에선 cleaner가 실행되지 않고 있는 모습을 확인할 수 있음</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="정리"></a>정리<a class="hash-link" href="#정리" title="Direct link to heading">#</a></h3><ul><li>clenaer, finalizer는 안정망 역할 or 중요하지 않은 네이티브 자원 회수 용도로만 활용하자~</li><li>물론 그냥 안쓰는게 최고</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="item-09-try-finally-보단-try-with-resources를-사용하라"></a>Item 09. try-finally 보단 try-with-resources를 사용하라<a class="hash-link" href="#item-09-try-finally-보단-try-with-resources를-사용하라" title="Direct link to heading">#</a></h2><ul><li>기존 자원해제는 try-finally로 활용하는 추세였지만 Java 7에서 try-with-resources 를 사용할 수 있음</li><li>try-finally에서는 finally 에서 예외가 발생하면 기존 예외를 잡아먹는 문제가 있음</li><li>AutoCloseable 을 통한 try-with-resources 구현은 try의 예외 부분을 잡아먹지 않는다<ul><li>거기다 close에서 예외가 발생하면 suppressed 키워드도 같이 나와 close의 예외 유무를 확인할 수 있음</li></ul></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/daehungwak/til/edit/main/docs/java/effective-java/02-destroy-create-object.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-04-25T09:31:54.000Z" class="docLastUpdatedAt_1Qna">2021-4-25</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/til/docs/java/effective-java/01-intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 01. 들어가기</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/til/docs/java/effective-java/03-common-method"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">03. 모든 객체의 공통 메서드 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#주요-포인트" class="table-of-contents__link">주요 포인트</a></li><li><a href="#item-01-생성자-대신-정적-팩터리-메서드를-고려하라" class="table-of-contents__link">Item 01. 생성자 대신 정적 팩터리 메서드를 고려하라</a><ul><li><a href="#일반-생성자보다-정적-팩터리-메소드가-좋은-이유" class="table-of-contents__link">일반 생성자보다 정적 팩터리 메소드가 좋은 이유</a></li><li><a href="#정적-팩터리-메소드의-단점" class="table-of-contents__link">정적 팩터리 메소드의 단점</a></li><li><a href="#정적-팩터리-메소드에-쓰이는-잘알려진-컨벤션" class="table-of-contents__link">정적 팩터리 메소드에 쓰이는 잘알려진 컨벤션</a></li><li><a href="#핵심-정리" class="table-of-contents__link">핵심 정리</a></li></ul></li><li><a href="#item-02-생성자에-매개변수가-많다면-빌더를-고려하라" class="table-of-contents__link">Item 02. 생성자에 매개변수가 많다면 빌더를 고려하라</a><ul><li><a href="#빌더-패턴-특징" class="table-of-contents__link">빌더 패턴 특징</a></li><li><a href="#빌더-패턴-단점" class="table-of-contents__link">빌더 패턴 단점</a></li><li><a href="#실습-코드" class="table-of-contents__link">실습 코드</a></li><li><a href="#핵심-정리-2" class="table-of-contents__link">핵심 정리 2</a></li></ul></li><li><a href="#item-03-private-생성자나-열거-타입으로-싱글턴임을-보증하라" class="table-of-contents__link">Item 03. private 생성자나 열거 타입으로 싱글턴임을 보증하라</a><ul><li><a href="#싱글턴-만드는-방식" class="table-of-contents__link">싱글턴 만드는 방식</a></li><li><a href="#위의-방식의-직렬화" class="table-of-contents__link">위의 방식의 직렬화</a></li><li><a href="#enum으로-싱글턴-만들기" class="table-of-contents__link">enum으로 싱글턴 만들기</a></li></ul></li><li><a href="#item-04-인스턴스화를-막으려거든-private-생성자를-사용하라" class="table-of-contents__link">Item 04. 인스턴스화를 막으려거든 private 생성자를 사용하라</a></li><li><a href="#item-05-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라" class="table-of-contents__link">Item 05. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라</a><ul><li><a href="#핵심정리" class="table-of-contents__link">핵심정리</a></li></ul></li><li><a href="#item-06-불필요한-객체-생성을-피하라" class="table-of-contents__link">Item 06. 불필요한 객체 생성을 피하라</a></li><li><a href="#item-07-다-쓴-객체-참조를-해제하라" class="table-of-contents__link">Item 07. 다 쓴 객체 참조를 해제하라</a><ul><li><a href="#메모리-누수-주의-케이스" class="table-of-contents__link">메모리 누수 주의 케이스</a></li><li><a href="#핵심정리-7" class="table-of-contents__link">핵심정리 7</a></li></ul></li><li><a href="#item-08-finalizer-와-cleaner-사용을-피하라" class="table-of-contents__link">Item 08. finalizer 와 cleaner 사용을 피하라</a><ul><li><a href="#그럼-finalizer와-cleaner는-왜-만들었는가" class="table-of-contents__link">그럼 finalizer와 cleaner는 왜 만들었는가</a></li><li><a href="#예제" class="table-of-contents__link">예제</a></li><li><a href="#정리" class="table-of-contents__link">정리</a></li></ul></li><li><a href="#item-09-try-finally-보단-try-with-resources를-사용하라" class="table-of-contents__link">Item 09. try-finally 보단 try-with-resources를 사용하라</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/til/styles.7b5922ae.js"></script>
<script src="/til/runtime~main.0371fc92.js"></script>
<script src="/til/main.7866f37e.js"></script>
<script src="/til/1.628400af.js"></script>
<script src="/til/71.29b6396e.js"></script>
<script src="/til/72.818542ac.js"></script>
<script src="/til/935f2afb.475effe2.js"></script>
<script src="/til/70.5d362b1d.js"></script>
<script src="/til/14db54ec.594d87e9.js"></script>
</body>
</html>
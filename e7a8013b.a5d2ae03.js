(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{188:function(e,t,l){"use strict";l.r(t),l.d(t,"frontMatter",(function(){return r})),l.d(t,"metadata",(function(){return i})),l.d(t,"toc",(function(){return c})),l.d(t,"default",(function(){return u}));var a=l(3),b=l(7),n=(l(0),l(197)),r={id:"10",title:"10. \uac1d\uccb4 \uc9c0\ud5a5 \ucffc\ub9ac \uc5b8\uc5b41 - \uae30\ubcf8"},i={unversionedId:"spring/jpa/10",id:"spring/jpa/10",isDocsHomePage:!1,title:"10. \uac1d\uccb4 \uc9c0\ud5a5 \ucffc\ub9ac \uc5b8\uc5b41 - \uae30\ubcf8",description:"\uc18c\uac1c",source:"@site/docs/spring/jpa/10.md",slug:"/spring/jpa/10",permalink:"/til/docs/spring/jpa/10",editUrl:"https://github.com/daehungwak/til/edit/main/docs/spring/jpa/10.md",version:"current",lastUpdatedAt:1622616963,sidebar:"docs",previous:{title:"09. \uac12 \ud0c0\uc785",permalink:"/til/docs/spring/jpa/09"},next:{title:"11. \uac1d\uccb4\uc9c0\ud5a5 \ucffc\ub9ac \uc5b8\uc5b42 - \uc911\uae09",permalink:"/til/docs/spring/jpa/11"}},c=[{value:"\uc18c\uac1c",id:"\uc18c\uac1c",children:[{value:"JPA\ub294 \ub2e4\uc591\ud55c \ucffc\ub9ac \ubc29\ubc95\uc744 \uc9c0\uc6d0",id:"jpa\ub294-\ub2e4\uc591\ud55c-\ucffc\ub9ac-\ubc29\ubc95\uc744-\uc9c0\uc6d0",children:[]},{value:"JPQL \uc18c\uac1c",id:"jpql-\uc18c\uac1c",children:[]},{value:"Criteria \uc18c\uac1c",id:"criteria-\uc18c\uac1c",children:[]},{value:"QueryDSL \uc18c\uac1c",id:"querydsl-\uc18c\uac1c",children:[]},{value:"Native SQL \uc18c\uac1c",id:"native-sql-\uc18c\uac1c",children:[]},{value:"JDBC API \uc9c1\uc811 \uc0ac\uc6a9, MyBatis, SpringJdbcTemplate \ud568\uaed8 \uc0ac\uc6a9",id:"jdbc-api-\uc9c1\uc811-\uc0ac\uc6a9-mybatis-springjdbctemplate-\ud568\uaed8-\uc0ac\uc6a9",children:[]}]},{value:"\uae30\ubcf8 \ubb38\ubc95\uacfc \ucffc\ub9ac API",id:"\uae30\ubcf8-\ubb38\ubc95\uacfc-\ucffc\ub9ac-api",children:[{value:"JPQL \ubb38\ubc95",id:"jpql-\ubb38\ubc95",children:[]},{value:"\ud30c\ub77c\ubbf8\ud130 \ubc14\uc778\ub529",id:"\ud30c\ub77c\ubbf8\ud130-\ubc14\uc778\ub529",children:[]}]},{value:"\ud504\ub85c\uc81d\uc158 (SELECT)",id:"\ud504\ub85c\uc81d\uc158-select",children:[{value:"\uc5ec\ub7ec \uac12 \uc870\ud68c",id:"\uc5ec\ub7ec-\uac12-\uc870\ud68c",children:[]}]},{value:"\ud398\uc774\uc9d5",id:"\ud398\uc774\uc9d5",children:[]},{value:"\uc870\uc778",id:"\uc870\uc778",children:[{value:"ON \uc808",id:"on-\uc808",children:[]}]},{value:"\uc11c\ube0c \ucffc\ub9ac",id:"\uc11c\ube0c-\ucffc\ub9ac",children:[{value:"\uc11c\ube0c \ucffc\ub9ac \uc608\uc81c",id:"\uc11c\ube0c-\ucffc\ub9ac-\uc608\uc81c",children:[]},{value:"JPQ \uc11c\ube0c \ucffc\ub9ac\uc758 \ud55c\uacc4 \u2b50\ufe0f",id:"jpq-\uc11c\ube0c-\ucffc\ub9ac\uc758-\ud55c\uacc4-\ufe0f",children:[]}]},{value:"JPQL \ud0c0\uc785 \ud45c\ud604\uacfc \uae30\ud0c0\uc2dd",id:"jpql-\ud0c0\uc785-\ud45c\ud604\uacfc-\uae30\ud0c0\uc2dd",children:[]},{value:"\uc870\uac74\uc2dd (CASE \ub4f1\ub4f1)",id:"\uc870\uac74\uc2dd-case-\ub4f1\ub4f1",children:[]},{value:"JPQL \ud568\uc218",id:"jpql-\ud568\uc218",children:[{value:"\uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218 \ud638\ucd9c",id:"\uc0ac\uc6a9\uc790-\uc815\uc758-\ud568\uc218-\ud638\ucd9c",children:[]}]},{value:"\ucd94\uac00\uc801\uc73c\ub85c",id:"\ucd94\uac00\uc801\uc73c\ub85c",children:[]}],m={toc:c};function u(e){var t=e.components,l=Object(b.a)(e,["components"]);return Object(n.b)("wrapper",Object(a.a)({},m,l,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h2",{id:"\uc18c\uac1c"},"\uc18c\uac1c"),Object(n.b)("h3",{id:"jpa\ub294-\ub2e4\uc591\ud55c-\ucffc\ub9ac-\ubc29\ubc95\uc744-\uc9c0\uc6d0"},"JPA\ub294 \ub2e4\uc591\ud55c \ucffc\ub9ac \ubc29\ubc95\uc744 \uc9c0\uc6d0"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"JPQL")),Object(n.b)("li",{parentName:"ul"},"JPA Criteria"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"QueryDSL")),Object(n.b)("li",{parentName:"ul"},"Native SQL"),Object(n.b)("li",{parentName:"ul"},"JDBC API \uc9c1\uc811 \uc0ac\uc6a9, MyBatis, SpringJdbcTemplate \ud568\uaed8 \uc0ac\uc6a9")),Object(n.b)("h3",{id:"jpql-\uc18c\uac1c"},"JPQL \uc18c\uac1c"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\uac00\uc7a5 \ub2e8\uc21c\ud55c \uc870\ud68c \ubc29\ubc95",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"EntityManager.find()"))),Object(n.b)("li",{parentName:"ul"},"18\uc0c1 \uc774\uc0c1\uc778 \uc0ac\ub78c \ubaa8\ub450 \ubd88\ub7ec\uc624\ub824\uba74 \uc5b4\ub5bb\uac8c?")),Object(n.b)("h4",{id:"jpql"},"JPQL"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"JPA\ub97c \uc0ac\uc6a9\ud558\uba74 \uc5d4\ud2f0\ud2f0 \uac1d\uccb4 \uc911\uc2ec\uc73c\ub85c \uac1c\ubc1c \ud574\uc57c\ud568"),Object(n.b)("li",{parentName:"ul"},"\ubb38\uc81c\ub294 \uac80\uc0c9 \ucffc\ub9ac"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\uac80\uc0c9\uc744 \ud560 \ub54c\ub3c4 \ud14c\uc774\ube14\uc774 \uc544\ub2cc \uc5d4\ud2f0\ud2f0 \uac1d\uccb4\ub97c \ub300\uc0c1\uc73c\ub85c \uac80\uc0c9")),Object(n.b)("li",{parentName:"ul"},"\uc571\uc774 \ud544\uc694\ud55c \ub370\uc774\ud130\ub9cc DB\uc5d0\uc11c \ubd88\ub7ec\uc624\ub824\uba74 \uacb0\uad6c \uac80\uc0c9 \uc870\uac74\uc774 \ud3ec\ud568\ub41c SQL\uc774 \ud544\uc694\ud568!"),Object(n.b)("li",{parentName:"ul"},"JPA\ub294 SQL\uc744 \ucd94\uc0c1\ud654\ud55c JPQL\uc774\ub77c\ub294 \uac1d\uccb4 \uc9c0\ud5a5 \ucffc\ub9ac \uc5b8\uc5b4 \uc81c\uacf5"),Object(n.b)("li",{parentName:"ul"},"JPQL\uc740 \uc5d4\ud2f0\ud2f0 \uac1d\uccb4\ub97c \ub300\uc0c1\uc73c\ub85c \ucffc\ub9ac"),Object(n.b)("li",{parentName:"ul"},"SQL\uc740 \ud14c\uc774\ube14\uc744 \ub300\uc0c1\uc73c\ub85c \ucffc\ub9ac"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"JPQL \uc744 \ud55c\ub9c8\ub514\ub85c \uac1d\uccb4 \uc9c0\ud5a5 \ucffc\ub9ac"))),Object(n.b)("h3",{id:"criteria-\uc18c\uac1c"},"Criteria \uc18c\uac1c"),Object(n.b)("blockquote",null,Object(n.b)("p",{parentName:"blockquote"},"Criteria \ub300\uc2e0 QueryDSL \uc0ac\uc6a9 \uad8c\uc7a5")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"JPQL\uc744 \ubb38\uc790\uc5f4 \ub354\ud558\ub294 \ubb38\uc81c\uac00 \uc634",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\ub3d9\uc801 \ucffc\ub9ac\ub85c \uc804\ud658\ud558\uba74 \uc88b\uc74c"))),Object(n.b)("li",{parentName:"ul"},"\uadf8 \ub300\uc548\uc73c\ub85c Criteria \ub098\uc634"),Object(n.b)("li",{parentName:"ul"},"\uc74c \uadf8\ub7f0\ub370 \uc624\ud788\ub824 \uac00\ub3c5\uc131\uc774 \ub5a8\uc5b4\uc9c0\ub294 \uac83 \uac19\uc74c")),Object(n.b)("h4",{id:"\uc7a5\uc810"},"\uc7a5\uc810"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\ub3d9\uc801\ucffc\ub9ac \uc0dd\uc131 \uc2dc \ucef4\ud30c\uc77c \uc2dc\uc810\uc5d0 \uc7a1\uc544\uc904 \uc218 \uc788\uc74c"),Object(n.b)("li",{parentName:"ul"},"\ub3d9\uc801\ucffc\ub9ac\ub97c \uc9dc\uae30 \ud3b8\ud568")),Object(n.b)("h4",{id:"\ub2e8\uc810"},"\ub2e8\uc810"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"SQL \uc2a4\ub7fd\uc9c0 \uc54a\uc74c..."),Object(n.b)("li",{parentName:"ul"},"\uc2e4\ubb34\uc5d0\uc11c \uac70\uc758 \uc548\uc4f0\uc2e0\ub2e4\uace0 \ud568"),Object(n.b)("li",{parentName:"ul"},"\ud55c\ub450\ubc88 \uc368\ubd24\ub294\ub370 \uc720\uc9c0\ubcf4\uc218\uac00 \uc548\ub428...")),Object(n.b)("h3",{id:"querydsl-\uc18c\uac1c"},"QueryDSL \uc18c\uac1c"),Object(n.b)("blockquote",null,Object(n.b)("p",{parentName:"blockquote"},"JPQL\uc774 \uadfc\ubcf8, \uae30\uc2b9\uc804 JPQL")),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java",metastring:'title="QueryDSL \uc608\uc81c',title:'"QueryDSL',"\uc608\uc81c":!0}),'Member m = ...;\nqueryFactory\n        .select(m)\n        .from(m)\n        .where(m.name.like("kim"))\n        .orderBy(m.name.desc())\n        .fetch()\n')),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\ubb38\uc790\uac00 \uc544\ub2cc \uc790\ubc14\ucf54\ub4dc\ub85c JPQL\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc74c"),Object(n.b)("li",{parentName:"ul"},"JPQL \ube4c\ub354 \uc5ed\ud560"),Object(n.b)("li",{parentName:"ul"},"\ucef4\ud30c\uc77c\uc2dc \uc624\ub958\uac80\ucd9c \uac00\ub2a5"),Object(n.b)("li",{parentName:"ul"},"\ub3d9\uc801\ucffc\ub9ac \uc791\uc131\uc774 \ud3b8\ud568"),Object(n.b)("li",{parentName:"ul"},"\ub2e8\uc21c\ud558\uace0 \uc26c\uc6c0"),Object(n.b)("li",{parentName:"ul"},"\uc2e4\ubb34 \uc0ac\uc6a9 \uad8c\uc7a5")),Object(n.b)("h3",{id:"native-sql-\uc18c\uac1c"},"Native SQL \uc18c\uac1c"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"JPA\uac00 \uc81c\uacf5\ud558\ub294 SQL\uc744 \uc9c1\uc811 \uc0ac\uc6a9\ud558\ub294 \uae30\ub2a5"),Object(n.b)("li",{parentName:"ul"},"JPQL\ub85c \ud574\uacb0\ud560 \uc218 \uc5c6\ub294 \ud2b9\uc815 DB\uc5d0 \uc758\uc874\uc801\uc778 \uae30\ub2a5")),Object(n.b)("h3",{id:"jdbc-api-\uc9c1\uc811-\uc0ac\uc6a9-mybatis-springjdbctemplate-\ud568\uaed8-\uc0ac\uc6a9"},"JDBC API \uc9c1\uc811 \uc0ac\uc6a9, MyBatis, SpringJdbcTemplate \ud568\uaed8 \uc0ac\uc6a9"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\uc9c1\uc811 \ucee4\ub125\uc158 \uc5bb\uc5b4\uc11c \uc0ac\uc6a9"),Object(n.b)("li",{parentName:"ul"},"JPA \ucffc\ub9ac\ub4e4\uc740 commit, query \uc2dc flush \ub428",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\uc601\uc18d\uc131 \ucee8\ud14d\uc2a4\ud2b8\ub97c \ud50c\ub7ec\uc2dc\ud574\uc57c \ud6c4\uc5d0 JdbcTemplate \uc744 \ubb38\uc81c\uc5c6\uc774 \uc0ac\uc6a9 \uac00\ub2a5")))),Object(n.b)("h2",{id:"\uae30\ubcf8-\ubb38\ubc95\uacfc-\ucffc\ub9ac-api"},"\uae30\ubcf8 \ubb38\ubc95\uacfc \ucffc\ub9ac API"),Object(n.b)("blockquote",null,Object(n.b)("p",{parentName:"blockquote"},"JPQL (Java Persistence Query Language)")),Object(n.b)("h3",{id:"jpql-\ubb38\ubc95"},"JPQL \ubb38\ubc95"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"select_\ubb38 :: =\nselect_\uc808\n  from_\uc808\n  [where_\uc808]\n  [groupby_\uc808]\n  [having_\uc808]\n  [orderby_\uc808]\n\nupdate_\ubb38 :: = update_\uc808 [where_\uc808]\ndelete_\ubb38 :: = delete_\uc808 [where_\uc808]\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"select m from Member as m where m.age > 18")),Object(n.b)("li",{parentName:"ul"},"Entity\uc640 \uc18d\uc131\uc740 \ub300\uc18c\ubb38\uc790 \uad6c\ubd84 O (Member, m.age)"),Object(n.b)("li",{parentName:"ul"},"JPQL \ud0a4\uc6cc\ub4dc\ub294 \ub300\uc18c\ubb38\uc790 \uad6c\ubd84 X (SELECT, From, where)"),Object(n.b)("li",{parentName:"ul"},"\uc5d4\ud2f0\ud2f0 \uc774\ub984(",Object(n.b)("inlineCode",{parentName:"li"},'@Entity(name = "")'),") \uc0ac\uc6a9, \ud14c\uc774\ube14 \uc774\ub984\uc774 \uc544\ub2d8"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\ubcc4\uce6d\uc740 \ud544\uc218"),"(m) (as \ub294 \uc0dd\ub7b5 \uac00\ub2a5)")),Object(n.b)("h4",{id:"\uc9d1\ud569\uacfc-\uc815\ub82c"},"\uc9d1\ud569\uacfc \uc815\ub82c"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"select\n  COUNT(m),\n  SUM(m.age),\n  AVG(m.age),\n  MAX(m.age),\n  MIN(m.age)\nfrom Member m\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"group by, order"),Object(n.b)("li",{parentName:"ul"},"having")),Object(n.b)("h4",{id:"typequery-query"},"TypeQuery, Query"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"TypeQuery: \ubc18\ud658 \ud0c0\uc785\uc774 \uba85\ud655\ud560 \ub54c \uc0ac\uc6a9"),Object(n.b)("li",{parentName:"ul"},"Query: \ubc18\ud658 \ud0c0\uc785\uc774 \uba85\ud655\ud558\uc9c0 \uc54a\uc744 \ub54c \uc0ac\uc6a9")),Object(n.b)("h4",{id:"\uacb0\uacfc\uc870\ud68c"},"\uacb0\uacfc\uc870\ud68c"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"query.getResultList()"),": \uacb0\uacfc\uac00 \ud558\ub098 \uc774\uc0c1\uc77c \ub54c",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\uacb0\uacfc\uac00 \uc5c6\uc73c\uba74 \ube48 \ub9ac\uc2a4\ud2b8 \ubc18\ud658"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"query.getSingleResult()"),": \uacb0\uacfc\uac00 \uc815\ud655\ud788 \ud558\ub098",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\uacb0\uacfc\uac00 \uc5c6\uc73c\uba74: javax.persistence.NoResultException"),Object(n.b)("li",{parentName:"ul"},"\uacb0\uacfc\uac00 \ub450\uac1c \uc774\uc0c1\uc774\uba74: javax.persistence.NonUniqueResultException"))),Object(n.b)("li",{parentName:"ul"},"Spring Data JPA \uc5d0\uc11c\ub294",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Exception \ubcf4\ub2e8..."),Object(n.b)("li",{parentName:"ul"},"null\uc774\ub098 Optional \ubc18\ud658")))),Object(n.b)("h3",{id:"\ud30c\ub77c\ubbf8\ud130-\ubc14\uc778\ub529"},"\ud30c\ub77c\ubbf8\ud130 \ubc14\uc778\ub529"),Object(n.b)("h4",{id:"\uc774\ub984-\uae30\uc900"},"\uc774\ub984 \uae30\uc900"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'Member singleResult2 =\n            em.createQuery("select m from Member m where m.username = :username", Member.class)\n                    .setParameter("username", "member1")\n                    .getSingleResult();\n')),Object(n.b)("h4",{id:"\uc704\uce58-\uae30\uc900"},"\uc704\uce58 \uae30\uc900"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"?1 \uc774\ub7f0 \uc2dd\uc73c\ub85c \uac00\ub2a5\ud558\ub098 \uad8c\uc7a5\ud558\uc9c0 \uc54a\uc74c")),Object(n.b)("h2",{id:"\ud504\ub85c\uc81d\uc158-select"},"\ud504\ub85c\uc81d\uc158 (SELECT)"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"SELECT \uc808\uc5d0 \uc870\ud68c\ud560 \ub300\uc0c1\uc744 \uc9c0\uc815\ud558\ub294 \uac83"),Object(n.b)("li",{parentName:"ul"},"\ub300\uc0c1: \uc5d4\ud2f0\ud2f0, \uc784\ubca0\ub514\ub4dc \ud0c0\uc785, \uc2a4\uce7c\ub77c \ud0c0\uc785 (primitive type)"),Object(n.b)("li",{parentName:"ul"},"Entity",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m FROM Member m")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m.team FROM Member m")))),Object(n.b)("li",{parentName:"ul"},"Embedded",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT o.adress from Order o")))),Object(n.b)("li",{parentName:"ul"},"Scalar",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m.age FROM Member m")))),Object(n.b)("li",{parentName:"ul"},"DISTINCT \ub85c \uc911\ubcf5 \uc81c\uac70")),Object(n.b)("h3",{id:"\uc5ec\ub7ec-\uac12-\uc870\ud68c"},"\uc5ec\ub7ec \uac12 \uc870\ud68c"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java",metastring:'title="1. Query \ud0c0\uc785 \uc870\ud68c"',title:'"1.',Query:!0,"\ud0c0\uc785":!0,'\uc870\ud68c"':!0}),'List resultList = em.createQuery("select m.age, m.username from Member m").getResultList();\nObject o  = resultList.get(0);\nObject[] result = (Object[]) o;\nSystem.out.println("age = " + result[0]);\nSystem.out.println("username = " + result[1]);\n')),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java",metastring:'title="2. Object[] \ud0c0\uc785 \uc870\ud68c"',title:'"2.',"Object[]":!0,"\ud0c0\uc785":!0,'\uc870\ud68c"':!0}),'List<Object[]> resultList = em.createQuery("select m.age, m.username from Member m").getResultList();\nfor (Object[] result : resultList) {\n    System.out.println("age = " + result[0]);\n    System.out.println("username = " + result[1]);\n}\n')),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java",metastring:'title="3. new \uba85\ub839\uc5b4 \uc870\ud68c"',title:'"3.',new:!0,"\uba85\ub839\uc5b4":!0,'\uc870\ud68c"':!0}),'List<MemberDto> resultList = em.createQuery(\n        "select new hellojpa.jpql.domain.MemberDto(m.username, m.age) from Member m",\n        MemberDto.class).getResultList();\nfor (MemberDto member : resultList) {\n    System.out.println("username = " + member.getUsername());\n    System.out.println("age = " + member.getAge());\n}\n')),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\ud328\ud0a4\uc9c0\uba85\uc744 \ub2e4 \uc801\uc5b4\uc57c \ud55c\ub2e4\ub294 \ub2e8\uc810\uc774 \uc788\uc74c"),Object(n.b)("li",{parentName:"ul"},"\uc21c\uc11c\uc640 \ud0c0\uc785\uc774 \uc77c\uce58\ud558\ub294 \uc0dd\uc131\uc790 \ud544\uc694")),Object(n.b)("h2",{id:"\ud398\uc774\uc9d5"},"\ud398\uc774\uc9d5"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"setFirstResult(int startPosition)"),": \uc870\ud68c \uc2dc\uc791 \uc704\uce58"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"setMaxResults(int maxResult)"),": \uc870\ud68c\ud560 \ub370\uc774\ud130 \uc218")),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'List<Member> resultList = em.createQuery("select m from Member m order by m.age desc", Member.class)\n        .setFirstResult(10)\n        .setMaxResults(10)\n        .getResultList();\n')),Object(n.b)("h2",{id:"\uc870\uc778"},"\uc870\uc778"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\ub0b4\ubd80 \uc870\uc778",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m FROM Member m [INNER] JOIN m.team t")))),Object(n.b)("li",{parentName:"ul"},"\uc678\ubd80 \uc870\uc778",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m FROM Member m LEFT [OUTER] JOIN m.team t")))),Object(n.b)("li",{parentName:"ul"},"\uc138\ud0c0 \uc870\uc778",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"select count(m) from Member m, Team t where m.username = t.name")),Object(n.b)("li",{parentName:"ul"},"Member row * Team row\ub9cc\ud07c Row\uac00 \ub098\uc634...")))),Object(n.b)("h3",{id:"on-\uc808"},"ON \uc808"),Object(n.b)("h4",{id:"1-\uc870\uc778-\ub300\uc0c1-\ud544\ud130\ub9c1"},"1. \uc870\uc778 \ub300\uc0c1 \ud544\ud130\ub9c1"),Object(n.b)("p",null,"\ud68c\uc6d0\uacfc \ud300\uc744 \uc870\uc778\ud558\uba74\uc11c, \ud300 \uc774\ub984\uc774 A\uc778 \ud300\ub9cc \uc870\uc778"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"JPQL",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m, t FROM Member m LEFT JOIN m.team t on t.name = 'A'")))),Object(n.b)("li",{parentName:"ul"},"SQL",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m.*, t.* FROM Member m LEFT JOIN Team t ON m.TEAM_ID=t.id and t.name='A'"))))),Object(n.b)("h4",{id:"2-\uc5f0\uad00\uad00\uacc4-\uc5c6\ub294-\uc5d4\ud2f0\ud2f0-\uc678\ubd80-\uc870\uc778"},"2. \uc5f0\uad00\uad00\uacc4 \uc5c6\ub294 \uc5d4\ud2f0\ud2f0 \uc678\ubd80 \uc870\uc778"),Object(n.b)("p",null,"\ud68c\uc6d0 \uc774\ub984\uacfc \ud300\uc758 \uc774\ub984\uc774 \uac19\uc740 \ub300\uc0c1 \uc678\ubd80 \uc870\uc778"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"JPQL",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"SELECT m, t FROM Member m LEFT JOIN Team t on m.username = t.name")))),Object(n.b)("li",{parentName:"ul"},"SQL",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\ube44\uc2b7\ud568")))),Object(n.b)("h2",{id:"\uc11c\ube0c-\ucffc\ub9ac"},"\uc11c\ube0c \ucffc\ub9ac"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\ub098\uc774\uac00 \ud3c9\uade0\ubcf4\ub2e4 \ub9ce\uc740 \ud68c\uc6d0")),Object(n.b)("p",null,Object(n.b)("inlineCode",{parentName:"p"},"select mfrom Member m where m.age > (select avg(m2.age) from Member m2)")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\ud55c\uac74\uc774\ub77c\ub3c4 \uc8fc\ubb38\ud55c \uace0\uac1d",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\uc544\ub798\uc640 \uac19\uc774 \ud558\uba74 \uc11c\ube0c\ucffc\ub9ac\uc640 \ubcf8 \ucffc\ub9ac\uc758 Member m\uc744 \uacf5\uc720\ud574\uc11c \uc131\ub2a5\uc774 \ub290\ub824\uc9d0\n",Object(n.b)("inlineCode",{parentName:"li"},"select m from Member m where (select count(o) from Order where m = o.member) > 0"))))),Object(n.b)("h3",{id:"\uc11c\ube0c-\ucffc\ub9ac-\uc608\uc81c"},"\uc11c\ube0c \ucffc\ub9ac \uc608\uc81c"),Object(n.b)("p",null,"\ud300 A \uc18c\uc18d\uc778 \ud68c\uc6d0"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"select m from Member m \n  where exists (select t from m.team t where t.name ='\ud300A')\n")),Object(n.b)("p",null,"\uc804\uccb4 \uc0c1\ud488 \uac01\uac01\uc758 \uc7ac\uace0\ubcf4\ub2e4 \uc8fc\ubb38\ub7c9\uc774 \ub9ce\uc740 \uc8fc\ubb38\ub4e4"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"select o from Order o \n  where o.orderAmout > ALL(select p.stockAmout from Product p) \n")),Object(n.b)("p",null,"\uc5b4\ub5a4 \ud300\uc774\ub4e0 \ud300\uc5d0 \uc18c\uc18d\ub41c \ud68c\uc6d0"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"select m from Member m\n  where m.team = ANY(select t from Team t)\n")),Object(n.b)("h3",{id:"jpq-\uc11c\ube0c-\ucffc\ub9ac\uc758-\ud55c\uacc4-\ufe0f"},"JPQ \uc11c\ube0c \ucffc\ub9ac\uc758 \ud55c\uacc4 \u2b50\ufe0f"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"JPQ \ub294 WHERE, HAVING \uc808\uc5d0\uc11c\ub9cc \uc11c\ube0c \ucffc\ub9ac \uc0ac\uc6a9 \uac00\ub2a5"),Object(n.b)("li",{parentName:"ul"},"SELECT \uc808\ub3c4 \uac00\ub2a5 (\ud558\uc774\ubc84\ub124\uc774\ud2b8 \uc9c0\uc6d0)"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"FROM \uc808\uc758 \uc11c\ube0c \ucffc\ub9ac\ub294 \ud604\uc7ac JPQL\uc5d0\uc11c \ubd88\uac00\ub2a5"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\uc870\uc778\uc73c\ub85c \ud480 \uc218 \uc788\uc73c\uba74 \ud480\uc5b4\uc11c \ud574\uacb0"),Object(n.b)("li",{parentName:"ul"},"\uc571\uc5d0\uc11c \uac00\uc838\uc628\uac78 \uc870\ub9bd\ud558\uac70\ub098, \ucffc\ub9ac\ub97c \uc5ec\ub7ec\uac1c\ub85c \ud480\uae30\ub3c4 \ud568"),Object(n.b)("li",{parentName:"ul"},"\uc815\uc548\ub418\uba74 native query")))),Object(n.b)("h2",{id:"jpql-\ud0c0\uc785-\ud45c\ud604\uacfc-\uae30\ud0c0\uc2dd"},"JPQL \ud0c0\uc785 \ud45c\ud604\uacfc \uae30\ud0c0\uc2dd"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\ubb38\uc790: ",Object(n.b)("inlineCode",{parentName:"li"},"'Hello'")," ",Object(n.b)("inlineCode",{parentName:"li"},"'What!'")),Object(n.b)("li",{parentName:"ul"},"\uc22b\uc790: long ",Object(n.b)("inlineCode",{parentName:"li"},"20L"),", double ",Object(n.b)("inlineCode",{parentName:"li"},"20D"),", float ",Object(n.b)("inlineCode",{parentName:"li"},"20F")),Object(n.b)("li",{parentName:"ul"},"Boolean: ",Object(n.b)("inlineCode",{parentName:"li"},"TRUE"),", ",Object(n.b)("inlineCode",{parentName:"li"},"FALSE")),Object(n.b)("li",{parentName:"ul"},"ENUM: ",Object(n.b)("inlineCode",{parentName:"li"},"jpabook.MemberType.Admin")," (\ud328\ud0a4\uc9c0\uba85 \ud3ec\ud568)",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"setParameter\ub85c \ub300\uccb4\ud560 \uc218 \uc788\uc74c"))),Object(n.b)("li",{parentName:"ul"},"\uc5d4\ud2f0\ud2f0 \ud0c0\uc785: ",Object(n.b)("inlineCode",{parentName:"li"},"TYPE(m)")," = Member (\uc0c1\uc18d \uad00\uacc4\uc5d0\uc11c \uc0ac\uc6a9) ")),Object(n.b)("blockquote",null,Object(n.b)("p",{parentName:"blockquote"},"\uadf8\ub9ac\uace0 \ud45c\uc900 SQL \uc740 \ub2e4 \uc9c0\uc6d0\ud55c\ub2e4\uace0 \ubcf4\uba74 \ub428")),Object(n.b)("h2",{id:"\uc870\uac74\uc2dd-case-\ub4f1\ub4f1"},"\uc870\uac74\uc2dd (CASE \ub4f1\ub4f1)"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"COALESCE: null \uc774\uba74 \uc9c0\uc815\ub41c \uac12 \ubc18\ud658"),Object(n.b)("li",{parentName:"ul"},"NULLIF")),Object(n.b)("h2",{id:"jpql-\ud568\uc218"},"JPQL \ud568\uc218"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"CONCAT"),Object(n.b)("li",{parentName:"ul"},"SUBSTRING"),Object(n.b)("li",{parentName:"ul"},"TRIM"),Object(n.b)("li",{parentName:"ul"},"..."),Object(n.b)("li",{parentName:"ul"},"SIZE, INDEX (JPA \uc6a9\ub3c4)",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"\uceec\ub809\uc158 \ud06c\uae30 ",Object(n.b)("inlineCode",{parentName:"li"},"select size(t.members) from Team t")),Object(n.b)("li",{parentName:"ul"},"INDEX \ub294 \uc548\uc4f0\ub294\uac8c...")))),Object(n.b)("h3",{id:"\uc0ac\uc6a9\uc790-\uc815\uc758-\ud568\uc218-\ud638\ucd9c"},"\uc0ac\uc6a9\uc790 \uc815\uc758 \ud568\uc218 \ud638\ucd9c"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790 \uc815\uc758\ud568\uc218\ub97c \uc9c1\uc811 \ub4f1\ub85d\ud574\uc11c \uc4f8 \uc218 \uc788\uc74c"),Object(n.b)("li",{parentName:"ul"},"\ubcf4\ud1b5 DB\ub9c8\ub2e4 \uae30\ubcf8\uc801\uc73c\ub85c \uc81c\uacf5\ud558\ub294 \ud568\uc218\ub4e4\uc740, Hibernate Dialect Function\uc73c\ub85c \ub4f1\ub85d\ub418\uc5b4 \uc788\uc5c8\uc74c"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"group_concat")," function\uc774 DB\uc5d0 \ub4f1\ub85d\ub418\uc5b4 \uc788\uc5b4\uc57c\ud568")),Object(n.b)("h2",{id:"\ucd94\uac00\uc801\uc73c\ub85c"},"\ucd94\uac00\uc801\uc73c\ub85c"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"lombok \uc5d0 equals HashCode "),Object(n.b)("li",{parentName:"ul"},"JPQL, queryDSL"),Object(n.b)("li",{parentName:"ul"},"\uc758\ubb38\uc0ac\ud56d ElementCollection")))}u.isMDXComponent=!0},197:function(e,t,l){"use strict";l.d(t,"a",(function(){return p})),l.d(t,"b",(function(){return o}));var a=l(0),b=l.n(a);function n(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function r(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,a)}return l}function i(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?r(Object(l),!0).forEach((function(t){n(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):r(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function c(e,t){if(null==e)return{};var l,a,b=function(e,t){if(null==e)return{};var l,a,b={},n=Object.keys(e);for(a=0;a<n.length;a++)l=n[a],t.indexOf(l)>=0||(b[l]=e[l]);return b}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)l=n[a],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(b[l]=e[l])}return b}var m=b.a.createContext({}),u=function(e){var t=b.a.useContext(m),l=t;return e&&(l="function"==typeof e?e(t):i(i({},t),e)),l},p=function(e){var t=u(e.components);return b.a.createElement(m.Provider,{value:t},e.children)},O={inlineCode:"code",wrapper:function(e){var t=e.children;return b.a.createElement(b.a.Fragment,{},t)}},j=b.a.forwardRef((function(e,t){var l=e.components,a=e.mdxType,n=e.originalType,r=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),p=u(l),j=a,o=p["".concat(r,".").concat(j)]||p[j]||O[j]||n;return l?b.a.createElement(o,i(i({ref:t},m),{},{components:l})):b.a.createElement(o,i({ref:t},m))}));function o(e,t){var l=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=l.length,r=new Array(n);r[0]=j;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,r[1]=i;for(var m=2;m<n;m++)r[m]=l[m];return b.a.createElement.apply(null,r)}return b.a.createElement.apply(null,l)}j.displayName="MDXCreateElement"}}]);